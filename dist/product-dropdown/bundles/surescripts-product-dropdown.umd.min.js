!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs/operators"),require("@angular/common"),require("@ng-bootstrap/ng-bootstrap")):"function"==typeof define&&define.amd?define("@surescripts/product-dropdown",["exports","@angular/core","@angular/common/http","rxjs/operators","@angular/common","@ng-bootstrap/ng-bootstrap"],e):e(((n=n||self).surescripts=n.surescripts||{},n.surescripts["product-dropdown"]={}),n.ng.core,n.ng.common.http,n.rxjs.operators,n.ng.common,n["@ng-bootstrap/ng-bootstrap"])}(this,function(n,e,r,t,o,i){"use strict";var s=function n(e){Object.assign(this,e),e&&e.children&&e.children.length>0&&(this.children=e.children.map(function(e){return new n(e)}))},a=function(){function n(n){this.http=n}return n.prototype.ngOnInit=function(){var n=this;if(!this.ssoBaseUrl)throw new Error('"ssoBaseUrl" is required.');this.ssoBaseUrl=this.ssoBaseUrl.replace(/\/+$/,""),this.http.get(this.ssoBaseUrl+"/app/v1/user/menu",{withCredentials:!0}).pipe(t.map(function(n){var e=window.location.href.toLowerCase(),r=[],t=n.map(function(n){return n.children&&n.children.length>0?r=r.concat(n.children.filter(function(n){return n.link&&e.startsWith(n.link.toLowerCase())})):e.startsWith(n.link&&n.link.toLowerCase())&&(r=r.concat(n)),new s(n)}),o=r.length>0?r.reduce(function(n,e){return n.link.length>e.link.length?n:e}):null;return t.map(function(n){return o&&(n.children&&n.children.length>0&&n.children.map(function(n){return n.selected=n.text===o.text&&n.link===o.link}),n.selected=n.text===o.text&&n.link===o.link),n})}),t.tap(function(e){return n.products=e})).subscribe()},n.decorators=[{type:e.Component,args:[{selector:"surescripts-product-dropdown",template:'<div ngbDropdown *ngIf="products && products.length > 0" display="dynamic">\r\n  <a ngbDropdownToggle class="nav-link" data-toggle="dropdown">\r\n    <span class="navbar-toggler-icon"></span>\r\n  </a>\r\n  <div ngbDropdownMenu>\r\n    <ng-container *ngFor="let p of products; index as i;">\r\n        <a class="dropdown-item" id="{{\'app-\'+i}}" *ngIf="p.link; else heading" [ngClass]="{active : p.selected}" href="{{p.link}}">{{p.text}}</a>\r\n        <ng-template #heading>\r\n          <h6 class="dropdown-header" id="{{\'heading-\'+i}}">{{p.text}}</h6>\r\n      </ng-template>\r\n      <ng-container *ngIf="p.children?.length > 0">\r\n        <ng-container *ngFor="let c of p.children; index as j;">\r\n            <a class="dropdown-item" id="{{\'app-\'+i+\'-child-\'+j}}" *ngIf="c.link; else childheading" [ngClass]="{active : c.selected}" href="{{c.link}}">{{c.text}}</a>\r\n            <ng-template #childheading>\r\n              <h6 class="dropdown-header" id="{{\'heading-\'+i+\'-child-\'+j}}">{{c.text}}</h6>\r\n            </ng-template>\r\n        </ng-container>\r\n        <div class="dropdown-divider"></div>\r\n      </ng-container>\r\n    </ng-container>\r\n  </div>\r\n</div>',styles:[".dropdown-toggle::after{display:none}.dropdown-toggle{cursor:pointer}"]}]}],n.ctorParameters=function(){return[{type:r.HttpClient}]},n.propDecorators={ssoBaseUrl:[{type:e.Input}]},n}(),c=function(){function n(){}return n.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule,r.HttpClientModule,i.NgbDropdownModule],declarations:[a],exports:[a]}]}],n}();n.ProductDropdownComponent=a,n.ProductDropdownModule=c,n.SurescriptsProduct=s,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=surescripts-product-dropdown.umd.min.js.map