{"version":3,"sources":["ng://@surescripts/user-profile/lib/user-profile.model.ts","ng://@surescripts/user-profile/lib/user-profile.component.ts","ng://@surescripts/user-profile/lib/user.model.ts","ng://@surescripts/user-profile/lib/user-profile.module.ts"],"names":["SurescriptsUserProfile","init","Object","assign","this","UserProfileComponent","http","isStaging","isProduction","prototype","ngOnInit","_this","logoutUrl","ssoBaseUrl","Error","replace","get","withCredentials","pipe","tap","resp","environment","toLocaleUpperCase","profile","subscribe","Component","args","selector","template","HttpClient","Input","SurescriptsUser","UserProfileModule","NgModule","imports","CommonModule","HttpClientModule","NgbDropdownModule","declarations","exports"],"mappings":"mnBACA,IAAAA,WAIuBC,GACfC,OAAOC,OAAOC,KAAMH,ICN5BI,EAAA,WAqBE,SAAAA,EAAoBC,GAAAF,KAAAE,KAAAA,EAHpBF,KAAAG,WAAY,EACZH,KAAAI,cAAe,SAMfH,EAAAI,UAAAC,SAAA,WAAA,IAAAC,EAAAP,KAEE,GADAA,KAAKQ,UAAYR,KAAKQ,WAAa,UAC9BR,KAAKS,WACR,MAAM,IAAIC,MAAM,6BAElBV,KAAKS,WAAaT,KAAKS,WAAWE,QAAQ,OAAQ,IAClDX,KAAKE,KAAKU,IAA+BZ,KAAKS,WAAU,uBACpD,CAAEI,iBAAiB,IAAQC,KAAKC,EAAAA,IAAI,SAAAC,GAChCT,EAAKU,YAAcD,EAAKC,aAAeD,EAAKC,YAAYC,oBACxDX,EAAKJ,UAAiC,YAArBI,EAAKU,YACtBV,EAAKH,aAAoC,eAArBG,EAAKU,YACzBV,EAAKY,QAAU,IAAIvB,EAAuBoB,MAC1CI,iCAhCXC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,2BACVC,SAAA,q5BANOC,EAAAA,iDAWNC,EAAAA,0BAGAA,EAAAA,WAfH,GCAAC,WAIuB9B,GACfC,OAAOC,OAAOC,KAAMH,ICL5B+B,EAAA,oDAMCC,EAAAA,SAAQP,KAAA,CAAC,CACRQ,QAAS,CACPC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,mBAEFC,aAAc,CAACjC,GACfkC,QAAS,CAAClC,SAbZ","sourcesContent":["import { SurescriptsUser } from './user.model';\r\nexport class SurescriptsUserProfile {\r\n    user: SurescriptsUser;\r\n    environment: string;\r\n    baseUrl: string;\r\n    public constructor(init?: Partial<SurescriptsUserProfile>) {\r\n        Object.assign(this, init);\r\n    }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { SurescriptsUserProfile } from './user-profile.model';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'surescripts-user-profile',\r\n  templateUrl: './user-profile.component.html',\r\n  styleUrls: ['./user-profile.component.scss']\r\n})\r\nexport class UserProfileComponent implements OnInit {\r\n\r\n  @Input()\r\n  logoutUrl: string;\r\n\r\n  @Input()\r\n  ssoBaseUrl: string;\r\n  environment: string;\r\n  isStaging = false;\r\n  isProduction = false;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  profile: SurescriptsUserProfile;\r\n\r\n  ngOnInit() {\r\n    this.logoutUrl = this.logoutUrl || 'logout';\r\n    if (!this.ssoBaseUrl) {\r\n      throw new Error('\"ssoBaseUrl\" is required.');\r\n    }\r\n    this.ssoBaseUrl = this.ssoBaseUrl.replace(/\\/+$/, '');\r\n    this.http.get<SurescriptsUserProfile>(`${this.ssoBaseUrl}/app/v1/user/profile`,\r\n        { withCredentials: true }).pipe(tap(resp => {\r\n            this.environment = resp.environment && resp.environment.toLocaleUpperCase();\r\n            this.isStaging = this.environment === 'STAGING';\r\n            this.isProduction = this.environment === 'PRODUCTION';\r\n            this.profile = new SurescriptsUserProfile(resp);\r\n        })).subscribe();\r\n  }\r\n}\r\n","export class SurescriptsUser {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n    public constructor(init?: Partial<SurescriptsUser>) {\r\n        Object.assign(this, init);\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { NgbDropdownModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgModule } from '@angular/core';\r\nimport { UserProfileComponent } from './user-profile.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    HttpClientModule,\r\n    NgbDropdownModule\r\n  ],\r\n  declarations: [UserProfileComponent],\r\n  exports: [UserProfileComponent]\r\n})\r\nexport class UserProfileModule { }\r\nexport { SurescriptsUserProfile } from './user-profile.model';\r\nexport {SurescriptsUser} from './user.model';\r\n"]}